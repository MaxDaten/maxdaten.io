---
phase: 08-post-meta
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
    - src/lib/utils/format-date.ts
    - src/routes/[slug]/+page.svelte
autonomous: true

must_haves:
    truths:
        - 'Date displays above post title'
        - 'Date displays in uppercase monospace with letter-spacing'
        - 'Relative dates show for posts within last week'
        - 'Updated date shows when applicable'
    artifacts:
        - path: 'src/lib/utils/format-date.ts'
          provides: 'Date formatting utilities'
          exports: ['formatPostDate', 'formatDateISO']
        - path: 'src/routes/[slug]/+page.svelte'
          provides: 'Restructured header with date above title'
          contains: 'date-header'
    key_links:
        - from: 'src/routes/[slug]/+page.svelte'
          to: 'src/lib/utils/format-date.ts'
          via: 'import formatPostDate, formatDateISO'
          pattern: 'import.*format-date'
---

<objective>
Restructure blog post header to position date above title with proper formatting

Purpose: Creates professional post header with date as entry point for temporal context Output: Date
formatting utility and restructured header in post page </objective>

<execution_context> @./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md </execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-post-meta/08-CONTEXT.md
@.planning/phases/08-post-meta/08-RESEARCH.md
@src/routes/[slug]/+page.svelte
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create date formatting utility</name>
  <files>src/lib/utils/format-date.ts</files>
  <action>
Create date formatting utility with two functions:

1. `formatPostDate(dateStr: string): string`
    - Within 7 days: Use `Intl.RelativeTimeFormat` ("Today", "Yesterday", "3 days ago")
    - Older than 7 days: Return uppercase formatted date ("JAN 20, 2026")
    - Use
      `toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }).toUpperCase()`

2. `formatDateISO(dateStr: string): string`
    - Return ISO date string for datetime attribute
    - `new Date(dateStr).toISOString().split('T')[0]`

Use native `Intl.RelativeTimeFormat` API - no additional dependencies needed. </action> <verify>File
exists with TypeScript types, no type errors on `npm run check`</verify> <done>Two exported
functions: formatPostDate returns relative or uppercase absolute date, formatDateISO returns ISO
string</done> </task>

<task type="auto">
  <name>Task 2: Restructure header with date above title</name>
  <files>src/routes/[slug]/+page.svelte</files>
  <action>
Restructure the `.header` section in the blog post page:

1. Import the new date utilities:
   `import { formatPostDate, formatDateISO } from '$lib/utils/format-date';`

2. Remove `dateformat` import (no longer needed)

3. Reorder header elements:

    ```svelte
    <div class="header">
        <!-- Date FIRST (above title) -->
        <div class="date-header">
            <time datetime={formatDateISO(date)}>{formatPostDate(date)}</time>
            {#if updated}
                <span class="updated-label">
                    Updated: <time datetime={formatDateISO(updated)}>{formatPostDate(updated)}</time
                    >
                </span>
            {/if}
        </div>

        <h1>{title}</h1>

        <!-- Keep existing metadata and tags below title -->
        ...
    </div>
    ```

4. Add `.date-header` styles:

    ```scss
    .date-header {
        font-family: var(--font--mono), monospace;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: rgba(var(--color--secondary-rgb), 0.6);
        margin-bottom: 16px;
    }

    .updated-label {
        margin-left: 12px;

        &::before {
            content: 'Â·';
            margin-right: 12px;
            color: rgba(var(--color--secondary-rgb), 0.4);
        }
    }
    ```

5. Remove the date/updated from the existing `.note` section in `.post-details` since it's now in
   `.date-header` </action> <verify>`npm run dev` shows date above title on any blog post, date
   appears in uppercase format</verify> <done>Date displays above title in uppercase monospace,
   "Updated:" label shows when applicable</done> </task>

</tasks>

<verification>
- `npm run check` passes with no TypeScript errors
- `npm run dev` and navigate to any blog post
- Date appears above the title in uppercase monospace (e.g., "JAN 20, 2026")
- For recent posts (if any within 7 days), relative date shows ("Today", "Yesterday", etc.)
- Updated date shows with separator when post has lastModified
</verification>

<success_criteria>

- Date formatting utility exists with proper TypeScript types
- Blog post header shows date above title
- Date styling matches Phase 6 monospace pattern (uppercase, letter-spacing)
- Relative dates work for recent posts </success_criteria>

<output>
After completion, create `.planning/phases/08-post-meta/08-01-SUMMARY.md`
</output>
